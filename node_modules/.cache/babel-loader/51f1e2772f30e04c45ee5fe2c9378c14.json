{"ast":null,"code":"var _jsxFileName = \"/Users/harishiyer/Documents/Code/Learning/data/craft-olympics/src/components/Stage/Stage.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { Grid } from '@mui/material';\nimport Track from '../Track/Track';\nimport Leaderboard from '../Leaderboard/Leaderboard';\nimport socketClient from \"socket.io-client\";\nimport t1 from \"./assets/Layle.gif\";\nimport t2 from \"./assets/Sinead.gif\";\nimport t3 from \"./assets/Wes.gif\";\nimport t4 from \"./assets/JM.gif\";\nimport t5 from \"./assets/BD.gif\";\nimport craftOlympicsLogo from \"./assets/Olympics-Logo-White-02.png\";\nimport Styles from './Stage.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Stage = () => {\n  _s();\n\n  const [teams, setTeams] = useState({\n    0: {\n      teamName: \"Geek Skwad\",\n      teamPoints: 0,\n      teamImage: t5,\n      gamesPlayed: 6,\n      gamesWon: 4\n    },\n    1: {\n      teamName: \"DC Justice League\",\n      teamPoints: 0,\n      teamImage: t4,\n      gamesPlayed: 5,\n      gamesWon: 3\n    },\n    2: {\n      teamName: \"Craftzilla\",\n      teamPoints: 0,\n      teamImage: t3,\n      gamesPlayed: 5,\n      gamesWon: 4\n    },\n    3: {\n      teamName: \"807\",\n      teamPoints: 0,\n      teamImage: t2,\n      gamesPlayed: 5,\n      gamesWon: 3\n    },\n    4: {\n      teamName: \"CRAFTO Libre\",\n      teamPoints: 0,\n      teamImage: t1,\n      gamesPlayed: 5,\n      gamesWon: 4\n    }\n  });\n  const SERVER = \"https://craft-olympics.herokuapp.com/\";\n  const socket = socketClient(SERVER, {\n    transports: ['websocket']\n  });\n  useEffect(() => {\n    socket.on('connection', socket => {\n      console.log(`I'm connected with the back-end`);\n    });\n    socket.on(\"sheetData\", data => {\n      if (!data.key) {\n        let dataArr = Object.keys(data)[0].substring(2, Object.keys(data)[0].length - 2).split(\",\");\n        let teamName = dataArr[0].substring(1, dataArr[0].length - 1);\n        let points = dataArr[1]; //console.log(teamName, points)\n\n        setTeams(prevTeam => {\n          let newTeam = { ...prevTeam\n          };\n          Object.values(prevTeam).forEach((singleTeam, index) => {\n            if (singleTeam.teamName === teamName) {\n              newTeam[index].teamName = singleTeam.teamName;\n              newTeam[index].teamPoints = points;\n              newTeam[index].teamImage = singleTeam.teamImage;\n              newTeam[index].gamesPlayed = singleTeam.gamesPlayed;\n              newTeam[index].gamesWon = singleTeam.gamesWon;\n            } else {\n              newTeam[index].teamName = singleTeam.teamName;\n              newTeam[index].teamPoints = singleTeam.teamPoints;\n              newTeam[index].teamImage = singleTeam.teamImage;\n              newTeam[index].gamesPlayed = singleTeam.gamesPlayed;\n              newTeam[index].gamesWon = singleTeam.gamesWon;\n            }\n          });\n          return prevTeam, newTeam;\n        });\n      } else {\n        console.log(\"socket data\", data);\n      }\n    });\n    socket.on(\"connect_error\", error => {\n      console.log(`socket error`, error);\n    });\n    return () => {\n      socket.off('connect');\n      socket.off('disconnect');\n    };\n  }, [socket]);\n  useEffect(() => {\n    const fetchData = async () => {\n      await fetch('https://script.google.com/macros/s/AKfycbzQfjtAOkRGNxseLayb1mCgz2qtPGiwE72GeCpBZW0NCHHrD49KXLPCCEvHt2eQ0RhKpA/exec').then(function (response) {\n        return response.json();\n      }).then(function (data) {\n        setTeams(prevTeam => {\n          let newTeam = { ...prevTeam\n          };\n          Object.values(prevTeam).forEach((singleTeam, index) => {\n            newTeam[index].teamName = data['data'][index + 1].team;\n            newTeam[index].teamPoints = data['data'][index + 1].points;\n            newTeam[index].teamImage = singleTeam.teamImage;\n            newTeam[index].gamesPlayed = singleTeam.gamesPlayed;\n            newTeam[index].gamesWon = singleTeam.gamesWon;\n          });\n          return prevTeam, newTeam;\n        });\n      });\n    };\n\n    fetchData().catch(console.error);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: Styles.grass_background,\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        rowSpacing: 2,\n        columnSpacing: {\n          xs: 1,\n          sm: 2,\n          lg: 2\n        },\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          style: {\n            height: '30vh'\n          },\n          children: /*#__PURE__*/_jsxDEV(Leaderboard, {\n            playingTeams: teams\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          style: {\n            height: '65vh'\n          },\n          children: /*#__PURE__*/_jsxDEV(Track, {\n            playingTeams: teams\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: craftOlympicsLogo,\n        alt: \"Craft Olympics Logo\",\n        className: Styles.logo\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n};\n\n_s(Stage, \"iLt04TjEKXmbbrVdJtZAPalvYYU=\");\n\n_c = Stage;\nexport default Stage;\n\nvar _c;\n\n$RefreshReg$(_c, \"Stage\");","map":{"version":3,"names":["React","useEffect","useState","Grid","Track","Leaderboard","socketClient","t1","t2","t3","t4","t5","craftOlympicsLogo","Styles","Stage","teams","setTeams","teamName","teamPoints","teamImage","gamesPlayed","gamesWon","SERVER","socket","transports","on","console","log","data","key","dataArr","Object","keys","substring","length","split","points","prevTeam","newTeam","values","forEach","singleTeam","index","error","off","fetchData","fetch","then","response","json","team","catch","grass_background","xs","sm","lg","height","logo"],"sources":["/Users/harishiyer/Documents/Code/Learning/data/craft-olympics/src/components/Stage/Stage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { Grid } from '@mui/material';\nimport Track from '../Track/Track'\nimport Leaderboard from '../Leaderboard/Leaderboard';\nimport socketClient from \"socket.io-client\";\n\nimport t1 from \"./assets/Layle.gif\"\nimport t2 from \"./assets/Sinead.gif\"\nimport t3 from \"./assets/Wes.gif\"\nimport t4 from \"./assets/JM.gif\"\nimport t5 from \"./assets/BD.gif\"\n\nimport craftOlympicsLogo from \"./assets/Olympics-Logo-White-02.png\"\n\nimport Styles from './Stage.module.css'\n\nconst Stage = () => {\n\n    const [teams, setTeams] = useState({\n        0: {\n            teamName: \"Geek Skwad\",\n            teamPoints: 0,\n            teamImage: t5,\n            gamesPlayed: 6,\n            gamesWon: 4,\n        },\n        1: {\n            teamName: \"DC Justice League\",\n            teamPoints: 0,\n            teamImage: t4,\n            gamesPlayed: 5,\n            gamesWon: 3,\n        },\n        2: {\n            teamName: \"Craftzilla\",\n            teamPoints: 0,\n            teamImage: t3,\n            gamesPlayed: 5,\n            gamesWon: 4,\n        },\n        3: {\n            teamName: \"807\",\n            teamPoints: 0,\n            teamImage: t2,\n            gamesPlayed: 5,\n            gamesWon: 3,\n        },\n        4: {\n            teamName: \"CRAFTO Libre\",\n            teamPoints: 0,\n            teamImage: t1,\n            gamesPlayed: 5,\n            gamesWon: 4,\n        },\n    });\n\n    const SERVER = \"https://craft-olympics.herokuapp.com/\";\n    const socket = socketClient(SERVER, {\n        transports: ['websocket']\n    });\n\n    useEffect(() => {\n\n        socket.on('connection', (socket) => {\n            console.log(`I'm connected with the back-end`)\n        });\n\n        socket.on(\"sheetData\", (data) => {\n            if(!data.key){\n                let dataArr = Object.keys(data)[0].substring(2, Object.keys(data)[0].length - 2).split(\",\")\n                let teamName = dataArr[0].substring(1, dataArr[0].length - 1)\n                let points = dataArr[1]\n\n                //console.log(teamName, points)\n\n                setTeams(prevTeam => {\n                    let newTeam = { ...prevTeam };\n\n                    Object.values(prevTeam).forEach((singleTeam, index) => {\n                        if (singleTeam.teamName === teamName) {\n                            \n                            newTeam[index].teamName = singleTeam.teamName\n                            newTeam[index].teamPoints = points\n                            newTeam[index].teamImage = singleTeam.teamImage\n                            newTeam[index].gamesPlayed = singleTeam.gamesPlayed\n                            newTeam[index].gamesWon = singleTeam.gamesWon\n\n                        } else {\n\n                            newTeam[index].teamName = singleTeam.teamName\n                            newTeam[index].teamPoints = singleTeam.teamPoints\n                            newTeam[index].teamImage = singleTeam.teamImage\n                            newTeam[index].gamesPlayed = singleTeam.gamesPlayed\n                            newTeam[index].gamesWon = singleTeam.gamesWon\n\n                        }\n                    })\n\n                    return (prevTeam, newTeam)\n                })\n            }else{\n                console.log(\"socket data\", data)\n            }\n        });\n\n        socket.on(\"connect_error\", (error) => {\n            console.log(`socket error`, error)\n        });\n\n        return () => {\n            socket.off('connect');\n            socket.off('disconnect');\n        };\n\n    },[socket])\n\n    useEffect(()=>{\n\n        const fetchData = async () => {\n            await fetch('https://script.google.com/macros/s/AKfycbzQfjtAOkRGNxseLayb1mCgz2qtPGiwE72GeCpBZW0NCHHrD49KXLPCCEvHt2eQ0RhKpA/exec').then(function(response){\n                return response.json()\n            }).then(function(data) {\n                setTeams(prevTeam => {\n                    let newTeam = { ...prevTeam };\n\n                    Object.values(prevTeam).forEach((singleTeam, index) => {\n                        newTeam[index].teamName = data['data'][index+1].team\n                        newTeam[index].teamPoints = data['data'][index+1].points\n                        newTeam[index].teamImage = singleTeam.teamImage\n                        newTeam[index].gamesPlayed = singleTeam.gamesPlayed\n                        newTeam[index].gamesWon = singleTeam.gamesWon\n                    })\n\n                    return (prevTeam, newTeam)\n                })\n            \n            })\n            \n        }\n\n        fetchData()\n            .catch(console.error);\n    },[])\n\n\n    return (\n        <>\n            <div className={Styles.grass_background}>\n                <Grid container rowSpacing={2} columnSpacing={{ xs: 1, sm: 2, lg: 2 }}>\n                    <Grid item xs={12} style={{height: '30vh'}}>\n                        <Leaderboard playingTeams={teams} />\n                    </Grid>\n                    <Grid item xs={12} style={{height: '65vh'}}>\n                        <Track playingTeams={teams} />\n                    </Grid>\n                </Grid>\n                <img src={craftOlympicsLogo} alt=\"Craft Olympics Logo\" className={Styles.logo} />\n            </div>\n        </>\n    )\n}\n\nexport default Stage"],"mappings":"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"},"metadata":{},"sourceType":"module"}